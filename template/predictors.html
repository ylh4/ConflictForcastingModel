{% extends "index.html" %}
{% block title %}

{% endblock %}
{% block body %}
<style>
section{
        background-color: linen;
        margin-left: 10%;
        margin-right: 10%;
        text-align: justify;
        padding-top: 3%;
        padding-right: 10px;
        padding-left: 10px;
    }
    img {
    display: block;
    margin-left: 20%;
  } 
</style>
<section>
<h1>Preditors</h1>
<h3>Feature Importances</h3>
<p>We evaluated different forms of time-series and tree-based algorithms 
    using a standard functional form of:
    <div id = "pd"></div>
    <script>
          var spec = '/static/feature_importance.json';
          vegaEmbed("#pd", spec);
     </script>
   
</p>
<p>Where, yi, t+1 is a binary output representing future onset of 
    conflict at the subnational level (1, conflict; 0,no conflict)
     as a function of yi, t-k ; previous onset of conflict, xi, t-k ;
      dynamic input variables in the past; si, static input variables 
      such as location reference and f(.) is the prediction function 
      learned by the model. 
    </p>
<h3>Class imbalance</h3>   
<p>In reality, conflict occurs in a rare like situation resulting in 
    a significant class imbalance in the output data between 
    conflict and non-conflict events. As can be seen from the 
    following chart, the recorded number of conflict events to that of peaceful events
    was 1 in 7 for most of the time except in the recent years where the same 
    figure reached roughly around 1 in 3.
</p>

<div id = "prob"></div>
<script>
      var spec = '/static/c_prob.json';
      vegaEmbed("#prob", spec);
 </script>


<p>Therefore, appropriate model is needed that can handle the above class 
    imbalance to make relatively accurate predictions. The 
    algorithms we evaluated include EasyEnsemble classifier, 
    standardl random forests, logistic regression (classifier), 
    xgb classifier, as well as Recurrent Neural Networks (RNNs). 
</p>
<p>We find that EasyEnsemble classifier has better 
    efficiency as it overcomes the problem of class-imbalance. 
</p>
    <h3>Relationship between conflict and input variables</h3>

    <style>
    * {
      box-sizing: border-box;
    }
    
    body {
      margin: 0;
      font-family: Arial, Helvetica, sans-serif;
    }
    
    .header {
      text-align: center;
      padding: 32px;
    }
    
    .row {
      display: -ms-flexbox; /* IE 10 */
      display: flex;
      -ms-flex-wrap: wrap; /* IE 10 */
      flex-wrap: wrap;
      padding: 0 4px;
    }
    
    /* Create two equal columns that sits next to each other */
    .column {
      -ms-flex: 50%; /* IE 10 */
      flex: 50%;
      padding: 0 4px;
    }
    
    .column img {
      margin-top: 8px;
      vertical-align: middle;
    }
    
    /* Style the buttons */
    .btn {
      border: none;
      outline: none;
      padding: 10px 16px;
      background-color: #f1f1f1;
      cursor: pointer;
      font-size: 18px;
    }
    
    .btn:hover {
      background-color: #ddd;
    }
    
    .btn.active {
      background-color: #666;
      color: white;
    }
    </style>
  
   
  <div class="header" id="myHeader">

    <h1>Image Grid</h1>
    <p>Click on the buttons to change the grid view.</p>
    <button class="btn" onclick="one()">1</button>
    <button class="btn active" onclick="two()">2</button>

  </div>
  
  <div class="row"> 
    <div class="column">
      <img src="/static/analysis-frequency of conflict.png" style="width:80%">
      <img src="/static/analysis_population.png" style="width:80%">

    </div>
    <div class="column">
      <img src="/static/analysis-rainfall.png" style="width:80%">
      <img src="/static/analysis-landcover.png" style="width:80%">
    </div>  
  
  <script>
  // Get the elements with class="column"
  var elements = document.getElementsByClassName("column");
  
  // Declare a loop variable
  var i;
  
  // Full-width images
  function one() {
      for (i = 0; i < elements.length; i++) {
      elements[i].style.msFlex = "100%";  // IE10
      elements[i].style.flex = "100%";
    }
  }
  
  // Two images side by side
  function two() {
    for (i = 0; i < elements.length; i++) {
      elements[i].style.msFlex = "50%";  // IE10
      elements[i].style.flex = "50%";
    }
  }

  // Add active class to the current button (highlight it)
  var header = document.getElementById("myHeader");
  var btns = header.getElementsByClassName("btn");
  for (var i = 0; i < btns.length; i++) {
    btns[i].addEventListener("click", function() {
      var current = document.getElementsByClassName("active");
      current[0].className = current[0].className.replace(" active", "");
      this.className += " active";
    });
  }
  </script>
</section>
{% endblock %}      
</body>
</html>